<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>SecureAndroid by dsahm</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>SecureAndroid</h1>
          <h2>A small library for encrypting and storing data securely on Android devices.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/dsahm/secureandroid/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/dsahm/secureandroid/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/dsahm/secureandroid" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a id="welcome-to-secureandroid" class="anchor" href="#welcome-to-secureandroid" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome to SecureAndroid</h3>

<p>SecureAndroid is a small library that will help you to easily encrypt, decrypt and store data securely on Android devices.
The library was designed with ease-of-use in mind. You do not have to worry about implementation details of cryptographic algorithms but simply use the provided API. 
SecureAndroid uses AES encryption in CBC mode with padding according to PKCS5. For data integrity HMacSHA256 or HMacSHA1 (according to the availability on the device) is used. For key derivation from passwords the PBKDF2WithHmacSHA256/1 (according to the availability on the device) is employed. 
SecureAndroid abstracts cryptographic implementation details and i/o-operations away so that you can concentrate on your app logic. </p>

<h3>
<a id="important-note" class="anchor" href="#important-note" aria-hidden="true"><span class="octicon octicon-link"></span></a>Important note</h3>

<p>If you use ProGuard, you need to add the following rule:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">-</span>keep <span class="pl-k">class</span> <span class="pl-en">my</span>.secureandroid.PrngFixes$* { <span class="pl-k">*</span>; }</pre></div>

<h3>
<a id="how-to-add-secureandroid-to-a-project" class="anchor" href="#how-to-add-secureandroid-to-a-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to add SecureAndroid to a project</h3>

<p>To use SecureAndroid, simply download the zip or tar.gz file and extract it. In your Android Studio project move to the java folder of your module:</p>

<p><img src="https://dl.dropboxusercontent.com/u/7603573/SecureAndroidUseStep1.png" alt=""></p>

<p>Create a new package:</p>

<p><img src="https://dl.dropboxusercontent.com/u/7603573/SecureAndroidUseStep2.png" alt=""></p>

<p>Choose your module as the destination:</p>

<p><img src="https://dl.dropboxusercontent.com/u/7603573/SecureAndroidUseStep3.png" alt=""></p>

<p>Name the package <em>my.secureandroid</em>:</p>

<p><img src="https://dl.dropboxusercontent.com/u/7603573/SecureAndroidUseStep4.png" alt=""></p>

<p>Go to where you extracted the zip or tar.gz file and drag or copy/paste the java classes into the created package folder:</p>

<p><img src="https://dl.dropboxusercontent.com/u/7603573/SecureAndroidUseStep5.png" alt=""></p>

<p>Simply click ok:</p>

<p><img src="https://dl.dropboxusercontent.com/u/7603573/SecureAndroidUseStep6.png" alt=""></p>

<p>That's it! After importing</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">import</span> <span class="pl-smi">my.secureandroid.SecureAndroid</span>;</pre></div>

<p>you can initialize a SecureAndroid object in your activity like this:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">try</span> {
    <span class="pl-smi">SecureAndroid</span> sc <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">SecureAndroid</span>(<span class="pl-smi">MyActivity</span><span class="pl-k">.</span><span class="pl-v">this</span>);
} <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> e) {
    <span class="pl-c">// Try it out to see the specific exceptions..and do smth</span>
}</pre></div>

<h3>
<a id="the-api" class="anchor" href="#the-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>The API</h3>

<p>The SecureAndroid class is the only class you will have to use. If you want you can take a look into the other classes and build your own little library out of these...but for now let's simply focus on using the public methods of the SecureAndroid class. To get an overview, you can take a look at the <a href="https://dl.dropboxusercontent.com/u/7603573/site/javadocs/index.html">javadocs</a>. If you want to learn about the public API you should look at the documentation of the class <em>SecureAndroid</em>.</p>

<p>To initialize a SecureAndroid object simply call its constructor and pass it the present context:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Initialize SecureAndroid object</span>
<span class="pl-smi">SecureAndroid</span> sc <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">SecureAndroid</span>(<span class="pl-smi">MyActivity</span><span class="pl-k">.</span><span class="pl-v">this</span>);</pre></div>

<p>Now all operations are done on the sc object. </p>

<h3>
<a id="encryptdecrypt" class="anchor" href="#encryptdecrypt" aria-hidden="true"><span class="octicon octicon-link"></span></a>encrypt/decrypt</h3>

<p>Lets start with simply encrypting and decrypting some data, for example a string:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Encrypt a string</span>
<span class="pl-k">byte</span>[] ciphertext <span class="pl-k">=</span> sc<span class="pl-k">.</span>encrypt(<span class="pl-s"><span class="pl-pds">"</span>mystring<span class="pl-pds">"</span></span><span class="pl-k">.</span>getBytes(<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>));
<span class="pl-c">// Decrypt the string</span>
<span class="pl-smi">String</span> mystring <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">String</span>(sc<span class="pl-k">.</span>decrypt(ciphertext), <span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>));</pre></div>

<p>All key handling and cryptographic operations are done transparently. When the encrypt and decrypt methods are called, SecureAndroid uses an auto-generated password that is device specific. That password is not stored on the device but can be read from it when someone else gets his hands on it. </p>

<h3>
<a id="encryptwithpassworddecryptwithpassword" class="anchor" href="#encryptwithpassworddecryptwithpassword" aria-hidden="true"><span class="octicon octicon-link"></span></a>encryptWithPassword/decryptWithPassword</h3>

<p>So, while the auto-password option is good if you simply want to add a layer of security to your app, if the data to be encrypted is very sensitive, you should provide a password yourself. For example, you could ask the user for a passphrase and then use SecureAndroid like this:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Encrypt a string with a given password</span>
<span class="pl-k">byte</span>[] ciphertext <span class="pl-k">=</span> sc<span class="pl-k">.</span>encryptWithPassword(<span class="pl-s"><span class="pl-pds">"</span>mystring<span class="pl-pds">"</span></span><span class="pl-k">.</span>getBytes(<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>mypassword<span class="pl-pds">"</span></span><span class="pl-k">.</span>toCharArray());
<span class="pl-c">// Decrypt the string with the password</span>
<span class="pl-smi">String</span> mystring <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">String</span>(sc<span class="pl-k">.</span>decryptWithPassword(ciphertext, <span class="pl-s"><span class="pl-pds">"</span>mypassword<span class="pl-pds">"</span></span><span class="pl-k">.</span>toCharArray()), <span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>);</pre></div>

<h3>
<a id="encryptandstoreretrieve" class="anchor" href="#encryptandstoreretrieve" aria-hidden="true"><span class="octicon octicon-link"></span></a>encryptAndStore/retrieve</h3>

<p>SecureAndroid does not only provide you with methods to simply encrypt and decrypt binary data that you can then handle yourself but also with methods to encrypt and directly store data. This abstracts i/o-operations. You simply have to remember the alias under which you want the data to be stored. Again, with the encryptAndStore/retrieve methods an auto-generated password is used. You can choose whether you want to store the data in the SharedPreferences or in a file with the MODE flag-option: SecureAndroid.FILE or SecureAndroid.SHARED_PREFERENCES. 
Note: If you want to store larger binary data the use of FILE should be preferred.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Encrypt a string and store it under the given alias in FILE mode</span>
sc<span class="pl-k">.</span>encryptAndStore(<span class="pl-smi">SecureAndroid</span><span class="pl-c1"><span class="pl-k">.</span>FILE</span>, <span class="pl-s"><span class="pl-pds">"</span>mystring<span class="pl-pds">"</span></span><span class="pl-k">.</span>getBytes(<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>data_alias<span class="pl-pds">"</span></span>);
<span class="pl-c">// Retrieve the string</span>
<span class="pl-smi">String</span> mystring <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">String</span>(sc<span class="pl-k">.</span>retrieve(<span class="pl-smi">SecureAndroid</span><span class="pl-c1"><span class="pl-k">.</span>FILE</span>, <span class="pl-s"><span class="pl-pds">"</span>data_alias<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>);</pre></div>

<h3>
<a id="encryptandstorewithpasswordretrievewithpassword" class="anchor" href="#encryptandstorewithpasswordretrievewithpassword" aria-hidden="true"><span class="octicon octicon-link"></span></a>encryptAndStoreWithPassword/retrieveWithPassword</h3>

<p>The encryptAndStoreWithPassword and retrieveWithPassword methods provide the same functionality as the above methods only that you can provide your own password. See # encryptWithPassword.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Encrypt a string with password and store it under the given alias in FILE mode</span>
sc<span class="pl-k">.</span>encryptAndStoreWithPassword(<span class="pl-smi">SecureAndroid</span><span class="pl-c1"><span class="pl-k">.</span>FILE</span>, <span class="pl-s"><span class="pl-pds">"</span>mystring<span class="pl-pds">"</span></span><span class="pl-k">.</span>getBytes(<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>), <span class="pl-s"><span class="pl-pds">"</span>data_alias<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mypassword<span class="pl-pds">"</span></span><span class="pl-k">.</span>toCharArray());
<span class="pl-c">// Retrieve</span>
<span class="pl-smi">String</span> mystring <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">String</span>(sc<span class="pl-k">.</span>retrieveWithPassword(<span class="pl-smi">SecureAndroid</span><span class="pl-c1"><span class="pl-k">.</span>FILE</span>, <span class="pl-s"><span class="pl-pds">"</span>data_alias<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>mypassword<span class="pl-pds">"</span></span><span class="pl-k">.</span>toCharArray()), <span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>);</pre></div>

<h3>
<a id="wipekey" class="anchor" href="#wipekey" aria-hidden="true"><span class="octicon octicon-link"></span></a>wipeKey</h3>

<p>In case you want to make all data that you have encrypted using SecureAndroid inaccessible and thus destroy it, you can simply wipe the key that was used to perform the cryptographic operations. That destroys the data since that key was generated completely (pseudo)-random. </p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Wipe key and thus wipe data</span>
sc<span class="pl-k">.</span>wipeKey();</pre></div>

<h3>
<a id="deletedata" class="anchor" href="#deletedata" aria-hidden="true"><span class="octicon octicon-link"></span></a>deleteData</h3>

<p>If you want to delete a specific file or a shared pref
erence you can do that by calling:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Delete specific data</span>
sc<span class="pl-k">.</span>deleteData(<span class="pl-smi">SecureAndroid</span><span class="pl-c1"><span class="pl-k">.</span>FILE</span>, <span class="pl-s"><span class="pl-pds">"</span>data_alias<span class="pl-pds">"</span></span>);
sc<span class="pl-k">.</span>deleteData(<span class="pl-smi">SecureAndroid</span><span class="pl-c1"><span class="pl-k">.</span>SHARED_PREFERENCES</span>, <span class="pl-s"><span class="pl-pds">"</span>another_data_alias<span class="pl-pds">"</span></span>);
</pre></div>

<h3>
<a id="exceptions" class="anchor" href="#exceptions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Exceptions</h3>

<p>Note that SecureAndroid will throw some useful exceptions if something wrong, for example if the wrong password was provided or you want to retrieve data that does not exist. See the javadocs for details.</p>
        </section>

        <footer>
          SecureAndroid is maintained by <a href="https://github.com/dsahm">dsahm</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
